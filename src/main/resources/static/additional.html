<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>추가 정보 입력</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; }
        .container { width: 90%; max-width: 400px; margin: 16px auto; }
        .title { font-size: 1.25rem; font-weight: bold; margin: 28px 0 4px; }
        .desc { font-size: 0.97rem; color: #888; margin-bottom: 18px; }
        .form-group { margin: 20px 0; }
        .form-group label { display: block; font-size: 1rem; margin-bottom: 8px; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem; }
        .btn-next {
            width: 100%; padding: 14px 0; border: none; border-radius: 8px;
            font-size: 1rem; color: #fff; background: #d1d5db; margin-top: 32px; cursor: not-allowed; font-weight: bold;
        }
        .btn-next.active { background: #3CAF60; cursor: pointer; }
    </style>
</head>
<body>
<div class="container">
    <form id="additionalInfoForm">
        <div class="title">추가 정보 입력</div>
        <div class="desc">필수 정보를 입력해주세요</div>
        <div class="form-group">
            <label for="nickname">닉네임 (이름)</label>
            <input type="text" id="nickname" name="nickname" required />
        </div>
        <div class="form-group">
            <label for="userId">아이디</label>
            <input type="text" id="userId" name="userId" required />
        </div>
        <div class="form-group">
            <label for="gender">성별</label>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>선택하세요</option>
                <option value="MALE">남성</option>
                <option value="FEMALE">여성</option>
                <option value="OTHER">기타</option>
            </select>
        </div>
        <div class="form-group">
            <label for="birth">생년월일</label>
            <input type="date" id="birth" name="birth" required />
        </div>
        <button type="submit" class="btn-next" id="nextBtn" disabled>제출</button>
    </form>
</div>

<script>
    const form = document.getElementById('additionalInfoForm');
    const nextBtn = document.getElementById('nextBtn');

    // 입력 필드 확인 및 버튼 활성화
    function checkRequired() {
        const inputsFilled = document.getElementById('nickname').value.trim() !== '' &&
            document.getElementById('userId').value.trim() !== '' &&
            document.getElementById('gender').value !== '' &&
            document.getElementById('birth').value !== '';
        nextBtn.disabled = !inputsFilled;
        nextBtn.classList.toggle('active', inputsFilled);
    }

    ['nickname', 'userId', 'gender', 'birth'].forEach(id => {
        document.getElementById(id).addEventListener('input', checkRequired);
    });

    // 폼 제출 처리
    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = {
            nickname: document.getElementById('nickname').value,
            userId: document.getElementById('userId').value,
            gender: document.getElementById('gender').value,
            birth: document.getElementById('birth').value
        };

        fetch('/v1/plantory/auth/kakao/additional', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
            .then(response => {
                if (response.ok) {
                    alert('추가 정보가 성공적으로 제출되었습니다!');
                    // 필요 시 다른 페이지로 이동: window.location = '/additional.html';
                } else {
                    alert('제출에 실패했습니다.');
                }
            })
            .catch(error => console.error('Error:', error));
    });
</script>
</body>
</html>